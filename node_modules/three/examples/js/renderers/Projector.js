'use strict';

/**
 * @author mrdoob / http://mrdoob.com/
 * @author supereggbert / http://www.paulbrunt.co.uk/
 * @author julianwa / https://github.com/julianwa
 */

THREE.RenderableObject = function () {

		this.id = 0;

		this.object = null;
		this.z = 0;
		this.renderOrder = 0;
};

//

THREE.RenderableFace = function () {

		this.id = 0;

		this.v1 = new THREE.RenderableVertex();
		this.v2 = new THREE.RenderableVertex();
		this.v3 = new THREE.RenderableVertex();

		this.normalModel = new THREE.Vector3();

		this.vertexNormalsModel = [new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3()];
		this.vertexNormalsLength = 0;

		this.color = new THREE.Color();
		this.material = null;
		this.uvs = [new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2()];

		this.z = 0;
		this.renderOrder = 0;
};

//

THREE.RenderableVertex = function () {

		this.position = new THREE.Vector3();
		this.positionWorld = new THREE.Vector3();
		this.positionScreen = new THREE.Vector4();

		this.visible = true;
};

THREE.RenderableVertex.prototype.copy = function (vertex) {

		this.positionWorld.copy(vertex.positionWorld);
		this.positionScreen.copy(vertex.positionScreen);
};

//

THREE.RenderableLine = function () {

		this.id = 0;

		this.v1 = new THREE.RenderableVertex();
		this.v2 = new THREE.RenderableVertex();

		this.vertexColors = [new THREE.Color(), new THREE.Color()];
		this.material = null;

		this.z = 0;
		this.renderOrder = 0;
};

//

THREE.RenderableSprite = function () {

		this.id = 0;

		this.object = null;

		this.x = 0;
		this.y = 0;
		this.z = 0;

		this.rotation = 0;
		this.scale = new THREE.Vector2();

		this.material = null;
		this.renderOrder = 0;
};

//

THREE.Projector = function () {

		var _object,
		    _objectCount,
		    _objectPool = [],
		    _objectPoolLength = 0,
		    _vertex,
		    _vertexCount,
		    _vertexPool = [],
		    _vertexPoolLength = 0,
		    _face,
		    _faceCount,
		    _facePool = [],
		    _facePoolLength = 0,
		    _line,
		    _lineCount,
		    _linePool = [],
		    _linePoolLength = 0,
		    _sprite,
		    _spriteCount,
		    _spritePool = [],
		    _spritePoolLength = 0,
		    _renderData = { objects: [], lights: [], elements: [] },
		    _vector3 = new THREE.Vector3(),
		    _vector4 = new THREE.Vector4(),
		    _clipBox = new THREE.Box3(new THREE.Vector3(-1, -1, -1), new THREE.Vector3(1, 1, 1)),
		    _boundingBox = new THREE.Box3(),
		    _points3 = new Array(3),
		    _points4 = new Array(4),
		    _viewMatrix = new THREE.Matrix4(),
		    _viewProjectionMatrix = new THREE.Matrix4(),
		    _modelMatrix,
		    _modelViewProjectionMatrix = new THREE.Matrix4(),
		    _normalMatrix = new THREE.Matrix3(),
		    _frustum = new THREE.Frustum(),
		    _clippedVertex1PositionScreen = new THREE.Vector4(),
		    _clippedVertex2PositionScreen = new THREE.Vector4();

		//

		this.projectVector = function (vector, camera) {

				console.warn('THREE.Projector: .projectVector() is now vector.project().');
				vector.project(camera);
		};

		this.unprojectVector = function (vector, camera) {

				console.warn('THREE.Projector: .unprojectVector() is now vector.unproject().');
				vector.unproject(camera);
		};

		this.pickingRay = function (vector, camera) {

				console.error('THREE.Projector: .pickingRay() is now raycaster.setFromCamera().');
		};

		//

		var RenderList = function RenderList() {

				var normals = [];
				var uvs = [];

				var object = null;
				var material = null;

				var normalMatrix = new THREE.Matrix3();

				function setObject(value) {

						object = value;
						material = object.material;

						normalMatrix.getNormalMatrix(object.matrixWorld);

						normals.length = 0;
						uvs.length = 0;
				}

				function projectVertex(vertex) {

						var position = vertex.position;
						var positionWorld = vertex.positionWorld;
						var positionScreen = vertex.positionScreen;

						positionWorld.copy(position).applyMatrix4(_modelMatrix);
						positionScreen.copy(positionWorld).applyMatrix4(_viewProjectionMatrix);

						var invW = 1 / positionScreen.w;

						positionScreen.x *= invW;
						positionScreen.y *= invW;
						positionScreen.z *= invW;

						vertex.visible = positionScreen.x >= -1 && positionScreen.x <= 1 && positionScreen.y >= -1 && positionScreen.y <= 1 && positionScreen.z >= -1 && positionScreen.z <= 1;
				}

				function pushVertex(x, y, z) {

						_vertex = getNextVertexInPool();
						_vertex.position.set(x, y, z);

						projectVertex(_vertex);
				}

				function pushNormal(x, y, z) {

						normals.push(x, y, z);
				}

				function pushUv(x, y) {

						uvs.push(x, y);
				}

				function checkTriangleVisibility(v1, v2, v3) {

						if (v1.visible === true || v2.visible === true || v3.visible === true) return true;

						_points3[0] = v1.positionScreen;
						_points3[1] = v2.positionScreen;
						_points3[2] = v3.positionScreen;

						return _clipBox.intersectsBox(_boundingBox.setFromPoints(_points3));
				}

				function checkBackfaceCulling(v1, v2, v3) {

						return (v3.positionScreen.x - v1.positionScreen.x) * (v2.positionScreen.y - v1.positionScreen.y) - (v3.positionScreen.y - v1.positionScreen.y) * (v2.positionScreen.x - v1.positionScreen.x) < 0;
				}

				function pushLine(a, b) {

						var v1 = _vertexPool[a];
						var v2 = _vertexPool[b];

						_line = getNextLineInPool();

						_line.id = object.id;
						_line.v1.copy(v1);
						_line.v2.copy(v2);
						_line.z = (v1.positionScreen.z + v2.positionScreen.z) / 2;
						_line.renderOrder = object.renderOrder;

						_line.material = object.material;

						_renderData.elements.push(_line);
				}

				function pushTriangle(a, b, c) {

						var v1 = _vertexPool[a];
						var v2 = _vertexPool[b];
						var v3 = _vertexPool[c];

						if (checkTriangleVisibility(v1, v2, v3) === false) return;

						if (material.side === THREE.DoubleSide || checkBackfaceCulling(v1, v2, v3) === true) {

								_face = getNextFaceInPool();

								_face.id = object.id;
								_face.v1.copy(v1);
								_face.v2.copy(v2);
								_face.v3.copy(v3);
								_face.z = (v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z) / 3;
								_face.renderOrder = object.renderOrder;

								// use first vertex normal as face normal

								_face.normalModel.fromArray(normals, a * 3);
								_face.normalModel.applyMatrix3(normalMatrix).normalize();

								for (var i = 0; i < 3; i++) {

										var normal = _face.vertexNormalsModel[i];
										normal.fromArray(normals, arguments[i] * 3);
										normal.applyMatrix3(normalMatrix).normalize();

										var uv = _face.uvs[i];
										uv.fromArray(uvs, arguments[i] * 2);
								}

								_face.vertexNormalsLength = 3;

								_face.material = object.material;

								_renderData.elements.push(_face);
						}
				}

				return {
						setObject: setObject,
						projectVertex: projectVertex,
						checkTriangleVisibility: checkTriangleVisibility,
						checkBackfaceCulling: checkBackfaceCulling,
						pushVertex: pushVertex,
						pushNormal: pushNormal,
						pushUv: pushUv,
						pushLine: pushLine,
						pushTriangle: pushTriangle
				};
		};

		var renderList = new RenderList();

		this.projectScene = function (scene, camera, sortObjects, sortElements) {

				_faceCount = 0;
				_lineCount = 0;
				_spriteCount = 0;

				_renderData.elements.length = 0;

				if (scene.autoUpdate === true) scene.updateMatrixWorld();
				if (camera.parent === null) camera.updateMatrixWorld();

				_viewMatrix.copy(camera.matrixWorldInverse.getInverse(camera.matrixWorld));
				_viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix, _viewMatrix);

				_frustum.setFromMatrix(_viewProjectionMatrix);

				//

				_objectCount = 0;

				_renderData.objects.length = 0;
				_renderData.lights.length = 0;

				scene.traverseVisible(function (object) {

						if (object instanceof THREE.Light) {

								_renderData.lights.push(object);
						} else if (object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Sprite) {

								var material = object.material;

								if (material.visible === false) return;

								if (object.frustumCulled === false || _frustum.intersectsObject(object) === true) {

										_object = getNextObjectInPool();
										_object.id = object.id;
										_object.object = object;

										_vector3.setFromMatrixPosition(object.matrixWorld);
										_vector3.applyProjection(_viewProjectionMatrix);
										_object.z = _vector3.z;
										_object.renderOrder = object.renderOrder;

										_renderData.objects.push(_object);
								}
						}
				});

				if (sortObjects === true) {

						_renderData.objects.sort(painterSort);
				}

				//

				for (var o = 0, ol = _renderData.objects.length; o < ol; o++) {

						var object = _renderData.objects[o].object;
						var geometry = object.geometry;

						renderList.setObject(object);

						_modelMatrix = object.matrixWorld;

						_vertexCount = 0;

						if (object instanceof THREE.Mesh) {

								if (geometry instanceof THREE.BufferGeometry) {

										var attributes = geometry.attributes;
										var groups = geometry.groups;

										if (attributes.position === undefined) continue;

										var positions = attributes.position.array;

										for (var i = 0, l = positions.length; i < l; i += 3) {

												renderList.pushVertex(positions[i], positions[i + 1], positions[i + 2]);
										}

										if (attributes.normal !== undefined) {

												var normals = attributes.normal.array;

												for (var i = 0, l = normals.length; i < l; i += 3) {

														renderList.pushNormal(normals[i], normals[i + 1], normals[i + 2]);
												}
										}

										if (attributes.uv !== undefined) {

												var uvs = attributes.uv.array;

												for (var i = 0, l = uvs.length; i < l; i += 2) {

														renderList.pushUv(uvs[i], uvs[i + 1]);
												}
										}

										if (geometry.index !== null) {

												var indices = geometry.index.array;

												if (groups.length > 0) {

														for (var o = 0; o < groups.length; o++) {

																var group = groups[o];

																for (var i = group.start, l = group.start + group.count; i < l; i += 3) {

																		renderList.pushTriangle(indices[i], indices[i + 1], indices[i + 2]);
																}
														}
												} else {

														for (var i = 0, l = indices.length; i < l; i += 3) {

																renderList.pushTriangle(indices[i], indices[i + 1], indices[i + 2]);
														}
												}
										} else {

												for (var i = 0, l = positions.length / 3; i < l; i += 3) {

														renderList.pushTriangle(i, i + 1, i + 2);
												}
										}
								} else if (geometry instanceof THREE.Geometry) {

										var vertices = geometry.vertices;
										var faces = geometry.faces;
										var faceVertexUvs = geometry.faceVertexUvs[0];

										_normalMatrix.getNormalMatrix(_modelMatrix);

										var material = object.material;

										var isFaceMaterial = material instanceof THREE.MultiMaterial;
										var objectMaterials = isFaceMaterial === true ? object.material : null;

										for (var v = 0, vl = vertices.length; v < vl; v++) {

												var vertex = vertices[v];

												_vector3.copy(vertex);

												if (material.morphTargets === true) {

														var morphTargets = geometry.morphTargets;
														var morphInfluences = object.morphTargetInfluences;

														for (var t = 0, tl = morphTargets.length; t < tl; t++) {

																var influence = morphInfluences[t];

																if (influence === 0) continue;

																var target = morphTargets[t];
																var targetVertex = target.vertices[v];

																_vector3.x += (targetVertex.x - vertex.x) * influence;
																_vector3.y += (targetVertex.y - vertex.y) * influence;
																_vector3.z += (targetVertex.z - vertex.z) * influence;
														}
												}

												renderList.pushVertex(_vector3.x, _vector3.y, _vector3.z);
										}

										for (var f = 0, fl = faces.length; f < fl; f++) {

												var face = faces[f];

												material = isFaceMaterial === true ? objectMaterials.materials[face.materialIndex] : object.material;

												if (material === undefined) continue;

												var side = material.side;

												var v1 = _vertexPool[face.a];
												var v2 = _vertexPool[face.b];
												var v3 = _vertexPool[face.c];

												if (renderList.checkTriangleVisibility(v1, v2, v3) === false) continue;

												var visible = renderList.checkBackfaceCulling(v1, v2, v3);

												if (side !== THREE.DoubleSide) {

														if (side === THREE.FrontSide && visible === false) continue;
														if (side === THREE.BackSide && visible === true) continue;
												}

												_face = getNextFaceInPool();

												_face.id = object.id;
												_face.v1.copy(v1);
												_face.v2.copy(v2);
												_face.v3.copy(v3);

												_face.normalModel.copy(face.normal);

												if (visible === false && (side === THREE.BackSide || side === THREE.DoubleSide)) {

														_face.normalModel.negate();
												}

												_face.normalModel.applyMatrix3(_normalMatrix).normalize();

												var faceVertexNormals = face.vertexNormals;

												for (var n = 0, nl = Math.min(faceVertexNormals.length, 3); n < nl; n++) {

														var normalModel = _face.vertexNormalsModel[n];
														normalModel.copy(faceVertexNormals[n]);

														if (visible === false && (side === THREE.BackSide || side === THREE.DoubleSide)) {

																normalModel.negate();
														}

														normalModel.applyMatrix3(_normalMatrix).normalize();
												}

												_face.vertexNormalsLength = faceVertexNormals.length;

												var vertexUvs = faceVertexUvs[f];

												if (vertexUvs !== undefined) {

														for (var u = 0; u < 3; u++) {

																_face.uvs[u].copy(vertexUvs[u]);
														}
												}

												_face.color = face.color;
												_face.material = material;

												_face.z = (v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z) / 3;
												_face.renderOrder = object.renderOrder;

												_renderData.elements.push(_face);
										}
								}
						} else if (object instanceof THREE.Line) {

								if (geometry instanceof THREE.BufferGeometry) {

										var attributes = geometry.attributes;

										if (attributes.position !== undefined) {

												var positions = attributes.position.array;

												for (var i = 0, l = positions.length; i < l; i += 3) {

														renderList.pushVertex(positions[i], positions[i + 1], positions[i + 2]);
												}

												if (geometry.index !== null) {

														var indices = geometry.index.array;

														for (var i = 0, l = indices.length; i < l; i += 2) {

																renderList.pushLine(indices[i], indices[i + 1]);
														}
												} else {

														var step = object instanceof THREE.LineSegments ? 2 : 1;

														for (var i = 0, l = positions.length / 3 - 1; i < l; i += step) {

																renderList.pushLine(i, i + 1);
														}
												}
										}
								} else if (geometry instanceof THREE.Geometry) {

										_modelViewProjectionMatrix.multiplyMatrices(_viewProjectionMatrix, _modelMatrix);

										var vertices = object.geometry.vertices;

										if (vertices.length === 0) continue;

										v1 = getNextVertexInPool();
										v1.positionScreen.copy(vertices[0]).applyMatrix4(_modelViewProjectionMatrix);

										var step = object instanceof THREE.LineSegments ? 2 : 1;

										for (var v = 1, vl = vertices.length; v < vl; v++) {

												v1 = getNextVertexInPool();
												v1.positionScreen.copy(vertices[v]).applyMatrix4(_modelViewProjectionMatrix);

												if ((v + 1) % step > 0) continue;

												v2 = _vertexPool[_vertexCount - 2];

												_clippedVertex1PositionScreen.copy(v1.positionScreen);
												_clippedVertex2PositionScreen.copy(v2.positionScreen);

												if (clipLine(_clippedVertex1PositionScreen, _clippedVertex2PositionScreen) === true) {

														// Perform the perspective divide
														_clippedVertex1PositionScreen.multiplyScalar(1 / _clippedVertex1PositionScreen.w);
														_clippedVertex2PositionScreen.multiplyScalar(1 / _clippedVertex2PositionScreen.w);

														_line = getNextLineInPool();

														_line.id = object.id;
														_line.v1.positionScreen.copy(_clippedVertex1PositionScreen);
														_line.v2.positionScreen.copy(_clippedVertex2PositionScreen);

														_line.z = Math.max(_clippedVertex1PositionScreen.z, _clippedVertex2PositionScreen.z);
														_line.renderOrder = object.renderOrder;

														_line.material = object.material;

														if (object.material.vertexColors === THREE.VertexColors) {

																_line.vertexColors[0].copy(object.geometry.colors[v]);
																_line.vertexColors[1].copy(object.geometry.colors[v - 1]);
														}

														_renderData.elements.push(_line);
												}
										}
								}
						} else if (object instanceof THREE.Sprite) {

								_vector4.set(_modelMatrix.elements[12], _modelMatrix.elements[13], _modelMatrix.elements[14], 1);
								_vector4.applyMatrix4(_viewProjectionMatrix);

								var invW = 1 / _vector4.w;

								_vector4.z *= invW;

								if (_vector4.z >= -1 && _vector4.z <= 1) {

										_sprite = getNextSpriteInPool();
										_sprite.id = object.id;
										_sprite.x = _vector4.x * invW;
										_sprite.y = _vector4.y * invW;
										_sprite.z = _vector4.z;
										_sprite.renderOrder = object.renderOrder;
										_sprite.object = object;

										_sprite.rotation = object.rotation;

										_sprite.scale.x = object.scale.x * Math.abs(_sprite.x - (_vector4.x + camera.projectionMatrix.elements[0]) / (_vector4.w + camera.projectionMatrix.elements[12]));
										_sprite.scale.y = object.scale.y * Math.abs(_sprite.y - (_vector4.y + camera.projectionMatrix.elements[5]) / (_vector4.w + camera.projectionMatrix.elements[13]));

										_sprite.material = object.material;

										_renderData.elements.push(_sprite);
								}
						}
				}

				if (sortElements === true) {

						_renderData.elements.sort(painterSort);
				}

				return _renderData;
		};

		// Pools

		function getNextObjectInPool() {

				if (_objectCount === _objectPoolLength) {

						var object = new THREE.RenderableObject();
						_objectPool.push(object);
						_objectPoolLength++;
						_objectCount++;
						return object;
				}

				return _objectPool[_objectCount++];
		}

		function getNextVertexInPool() {

				if (_vertexCount === _vertexPoolLength) {

						var vertex = new THREE.RenderableVertex();
						_vertexPool.push(vertex);
						_vertexPoolLength++;
						_vertexCount++;
						return vertex;
				}

				return _vertexPool[_vertexCount++];
		}

		function getNextFaceInPool() {

				if (_faceCount === _facePoolLength) {

						var face = new THREE.RenderableFace();
						_facePool.push(face);
						_facePoolLength++;
						_faceCount++;
						return face;
				}

				return _facePool[_faceCount++];
		}

		function getNextLineInPool() {

				if (_lineCount === _linePoolLength) {

						var line = new THREE.RenderableLine();
						_linePool.push(line);
						_linePoolLength++;
						_lineCount++;
						return line;
				}

				return _linePool[_lineCount++];
		}

		function getNextSpriteInPool() {

				if (_spriteCount === _spritePoolLength) {

						var sprite = new THREE.RenderableSprite();
						_spritePool.push(sprite);
						_spritePoolLength++;
						_spriteCount++;
						return sprite;
				}

				return _spritePool[_spriteCount++];
		}

		//

		function painterSort(a, b) {

				if (a.renderOrder !== b.renderOrder) {

						return a.renderOrder - b.renderOrder;
				} else if (a.z !== b.z) {

						return b.z - a.z;
				} else if (a.id !== b.id) {

						return a.id - b.id;
				} else {

						return 0;
				}
		}

		function clipLine(s1, s2) {

				var alpha1 = 0,
				    alpha2 = 1,


				// Calculate the boundary coordinate of each vertex for the near and far clip planes,
				// Z = -1 and Z = +1, respectively.
				bc1near = s1.z + s1.w,
				    bc2near = s2.z + s2.w,
				    bc1far = -s1.z + s1.w,
				    bc2far = -s2.z + s2.w;

				if (bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0) {

						// Both vertices lie entirely within all clip planes.
						return true;
				} else if (bc1near < 0 && bc2near < 0 || bc1far < 0 && bc2far < 0) {

						// Both vertices lie entirely outside one of the clip planes.
						return false;
				} else {

						// The line segment spans at least one clip plane.

						if (bc1near < 0) {

								// v1 lies outside the near plane, v2 inside
								alpha1 = Math.max(alpha1, bc1near / (bc1near - bc2near));
						} else if (bc2near < 0) {

								// v2 lies outside the near plane, v1 inside
								alpha2 = Math.min(alpha2, bc1near / (bc1near - bc2near));
						}

						if (bc1far < 0) {

								// v1 lies outside the far plane, v2 inside
								alpha1 = Math.max(alpha1, bc1far / (bc1far - bc2far));
						} else if (bc2far < 0) {

								// v2 lies outside the far plane, v2 inside
								alpha2 = Math.min(alpha2, bc1far / (bc1far - bc2far));
						}

						if (alpha2 < alpha1) {

								// The line segment spans two boundaries, but is outside both of them.
								// (This can't happen when we're only clipping against just near/far but good
								//  to leave the check here for future usage if other clip planes are added.)
								return false;
						} else {

								// Update the s1 and s2 vertices to match the clipped line segment.
								s1.lerp(s2, alpha1);
								s2.lerp(s1, 1 - alpha2);

								return true;
						}
				}
		}
};
//# sourceMappingURL=data:application/json;base64,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O0FBRUEsS0FMTSxNQUtBOzs7O0FBSU4sVUFBSyxVQUFVLENBQWYsRUFBbUI7OztBQUdsQixpQkFBUyxLQUFLLEdBQUwsQ0FBVSxNQUFWLEVBQWtCLFdBQVksVUFBVSxPQUF0QixDQUFsQixDQUFUO0FBRUEsT0FMRCxNQUtPLElBQUssVUFBVSxDQUFmLEVBQW1COzs7QUFHekIsaUJBQVMsS0FBSyxHQUFMLENBQVUsTUFBVixFQUFrQixXQUFZLFVBQVUsT0FBdEIsQ0FBbEIsQ0FBVDtBQUVBOztBQUVELFVBQUssU0FBUyxDQUFkLEVBQWtCOzs7QUFHakIsaUJBQVMsS0FBSyxHQUFMLENBQVUsTUFBVixFQUFrQixVQUFXLFNBQVMsTUFBcEIsQ0FBbEIsQ0FBVDtBQUVBLE9BTEQsTUFLTyxJQUFLLFNBQVMsQ0FBZCxFQUFrQjs7O0FBR3hCLGlCQUFTLEtBQUssR0FBTCxDQUFVLE1BQVYsRUFBa0IsVUFBVyxTQUFTLE1BQXBCLENBQWxCLENBQVQ7QUFFQTs7QUFFRCxVQUFLLFNBQVMsTUFBZCxFQUF1Qjs7Ozs7QUFLdEIsZUFBTyxLQUFQO0FBRUEsT0FQRCxNQU9POzs7QUFHTixXQUFHLElBQUgsQ0FBUyxFQUFULEVBQWEsTUFBYjtBQUNBLFdBQUcsSUFBSCxDQUFTLEVBQVQsRUFBYSxJQUFJLE1BQWpCOztBQUVBLGVBQU8sSUFBUDtBQUVBO0FBRUQ7QUFFRDtBQUVELENBdHpCRCIsImZpbGUiOiJQcm9qZWN0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogQGF1dGhvciBzdXBlcmVnZ2JlcnQgLyBodHRwOi8vd3d3LnBhdWxicnVudC5jby51ay9cclxuICogQGF1dGhvciBqdWxpYW53YSAvIGh0dHBzOi8vZ2l0aHViLmNvbS9qdWxpYW53YVxyXG4gKi9cclxuXHJcblRIUkVFLlJlbmRlcmFibGVPYmplY3QgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdHRoaXMuaWQgPSAwO1xyXG5cclxuXHR0aGlzLm9iamVjdCA9IG51bGw7XHJcblx0dGhpcy56ID0gMDtcclxuXHR0aGlzLnJlbmRlck9yZGVyID0gMDtcclxuXHJcbn07XHJcblxyXG4vL1xyXG5cclxuVEhSRUUuUmVuZGVyYWJsZUZhY2UgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdHRoaXMuaWQgPSAwO1xyXG5cclxuXHR0aGlzLnYxID0gbmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXgoKTtcclxuXHR0aGlzLnYyID0gbmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXgoKTtcclxuXHR0aGlzLnYzID0gbmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXgoKTtcclxuXHJcblx0dGhpcy5ub3JtYWxNb2RlbCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcblxyXG5cdHRoaXMudmVydGV4Tm9ybWFsc01vZGVsID0gWyBuZXcgVEhSRUUuVmVjdG9yMygpLCBuZXcgVEhSRUUuVmVjdG9yMygpLCBuZXcgVEhSRUUuVmVjdG9yMygpIF07XHJcblx0dGhpcy52ZXJ0ZXhOb3JtYWxzTGVuZ3RoID0gMDtcclxuXHJcblx0dGhpcy5jb2xvciA9IG5ldyBUSFJFRS5Db2xvcigpO1xyXG5cdHRoaXMubWF0ZXJpYWwgPSBudWxsO1xyXG5cdHRoaXMudXZzID0gWyBuZXcgVEhSRUUuVmVjdG9yMigpLCBuZXcgVEhSRUUuVmVjdG9yMigpLCBuZXcgVEhSRUUuVmVjdG9yMigpIF07XHJcblxyXG5cdHRoaXMueiA9IDA7XHJcblx0dGhpcy5yZW5kZXJPcmRlciA9IDA7XHJcblxyXG59O1xyXG5cclxuLy9cclxuXHJcblRIUkVFLlJlbmRlcmFibGVWZXJ0ZXggPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdHRoaXMucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cdHRoaXMucG9zaXRpb25Xb3JsZCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcblx0dGhpcy5wb3NpdGlvblNjcmVlbiA9IG5ldyBUSFJFRS5WZWN0b3I0KCk7XHJcblxyXG5cdHRoaXMudmlzaWJsZSA9IHRydWU7XHJcblxyXG59O1xyXG5cclxuVEhSRUUuUmVuZGVyYWJsZVZlcnRleC5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uICggdmVydGV4ICkge1xyXG5cclxuXHR0aGlzLnBvc2l0aW9uV29ybGQuY29weSggdmVydGV4LnBvc2l0aW9uV29ybGQgKTtcclxuXHR0aGlzLnBvc2l0aW9uU2NyZWVuLmNvcHkoIHZlcnRleC5wb3NpdGlvblNjcmVlbiApO1xyXG5cclxufTtcclxuXHJcbi8vXHJcblxyXG5USFJFRS5SZW5kZXJhYmxlTGluZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0dGhpcy5pZCA9IDA7XHJcblxyXG5cdHRoaXMudjEgPSBuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleCgpO1xyXG5cdHRoaXMudjIgPSBuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleCgpO1xyXG5cclxuXHR0aGlzLnZlcnRleENvbG9ycyA9IFsgbmV3IFRIUkVFLkNvbG9yKCksIG5ldyBUSFJFRS5Db2xvcigpIF07XHJcblx0dGhpcy5tYXRlcmlhbCA9IG51bGw7XHJcblxyXG5cdHRoaXMueiA9IDA7XHJcblx0dGhpcy5yZW5kZXJPcmRlciA9IDA7XHJcblxyXG59O1xyXG5cclxuLy9cclxuXHJcblRIUkVFLlJlbmRlcmFibGVTcHJpdGUgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdHRoaXMuaWQgPSAwO1xyXG5cclxuXHR0aGlzLm9iamVjdCA9IG51bGw7XHJcblxyXG5cdHRoaXMueCA9IDA7XHJcblx0dGhpcy55ID0gMDtcclxuXHR0aGlzLnogPSAwO1xyXG5cclxuXHR0aGlzLnJvdGF0aW9uID0gMDtcclxuXHR0aGlzLnNjYWxlID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcclxuXHJcblx0dGhpcy5tYXRlcmlhbCA9IG51bGw7XHJcblx0dGhpcy5yZW5kZXJPcmRlciA9IDA7XHJcblxyXG59O1xyXG5cclxuLy9cclxuXHJcblRIUkVFLlByb2plY3RvciA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0dmFyIF9vYmplY3QsIF9vYmplY3RDb3VudCwgX29iamVjdFBvb2wgPSBbXSwgX29iamVjdFBvb2xMZW5ndGggPSAwLFxyXG5cdF92ZXJ0ZXgsIF92ZXJ0ZXhDb3VudCwgX3ZlcnRleFBvb2wgPSBbXSwgX3ZlcnRleFBvb2xMZW5ndGggPSAwLFxyXG5cdF9mYWNlLCBfZmFjZUNvdW50LCBfZmFjZVBvb2wgPSBbXSwgX2ZhY2VQb29sTGVuZ3RoID0gMCxcclxuXHRfbGluZSwgX2xpbmVDb3VudCwgX2xpbmVQb29sID0gW10sIF9saW5lUG9vbExlbmd0aCA9IDAsXHJcblx0X3Nwcml0ZSwgX3Nwcml0ZUNvdW50LCBfc3ByaXRlUG9vbCA9IFtdLCBfc3ByaXRlUG9vbExlbmd0aCA9IDAsXHJcblxyXG5cdF9yZW5kZXJEYXRhID0geyBvYmplY3RzOiBbXSwgbGlnaHRzOiBbXSwgZWxlbWVudHM6IFtdIH0sXHJcblxyXG5cdF92ZWN0b3IzID0gbmV3IFRIUkVFLlZlY3RvcjMoKSxcclxuXHRfdmVjdG9yNCA9IG5ldyBUSFJFRS5WZWN0b3I0KCksXHJcblxyXG5cdF9jbGlwQm94ID0gbmV3IFRIUkVFLkJveDMoIG5ldyBUSFJFRS5WZWN0b3IzKCAtIDEsIC0gMSwgLSAxICksIG5ldyBUSFJFRS5WZWN0b3IzKCAxLCAxLCAxICkgKSxcclxuXHRfYm91bmRpbmdCb3ggPSBuZXcgVEhSRUUuQm94MygpLFxyXG5cdF9wb2ludHMzID0gbmV3IEFycmF5KCAzICksXHJcblx0X3BvaW50czQgPSBuZXcgQXJyYXkoIDQgKSxcclxuXHJcblx0X3ZpZXdNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpLFxyXG5cdF92aWV3UHJvamVjdGlvbk1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCksXHJcblxyXG5cdF9tb2RlbE1hdHJpeCxcclxuXHRfbW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCksXHJcblxyXG5cdF9ub3JtYWxNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4MygpLFxyXG5cclxuXHRfZnJ1c3R1bSA9IG5ldyBUSFJFRS5GcnVzdHVtKCksXHJcblxyXG5cdF9jbGlwcGVkVmVydGV4MVBvc2l0aW9uU2NyZWVuID0gbmV3IFRIUkVFLlZlY3RvcjQoKSxcclxuXHRfY2xpcHBlZFZlcnRleDJQb3NpdGlvblNjcmVlbiA9IG5ldyBUSFJFRS5WZWN0b3I0KCk7XHJcblxyXG5cdC8vXHJcblxyXG5cdHRoaXMucHJvamVjdFZlY3RvciA9IGZ1bmN0aW9uICggdmVjdG9yLCBjYW1lcmEgKSB7XHJcblxyXG5cdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuUHJvamVjdG9yOiAucHJvamVjdFZlY3RvcigpIGlzIG5vdyB2ZWN0b3IucHJvamVjdCgpLicgKTtcclxuXHRcdHZlY3Rvci5wcm9qZWN0KCBjYW1lcmEgKTtcclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy51bnByb2plY3RWZWN0b3IgPSBmdW5jdGlvbiAoIHZlY3RvciwgY2FtZXJhICkge1xyXG5cclxuXHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlByb2plY3RvcjogLnVucHJvamVjdFZlY3RvcigpIGlzIG5vdyB2ZWN0b3IudW5wcm9qZWN0KCkuJyApO1xyXG5cdFx0dmVjdG9yLnVucHJvamVjdCggY2FtZXJhICk7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMucGlja2luZ1JheSA9IGZ1bmN0aW9uICggdmVjdG9yLCBjYW1lcmEgKSB7XHJcblxyXG5cdFx0Y29uc29sZS5lcnJvciggJ1RIUkVFLlByb2plY3RvcjogLnBpY2tpbmdSYXkoKSBpcyBub3cgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEoKS4nICk7XHJcblxyXG5cdH07XHJcblxyXG5cdC8vXHJcblxyXG5cdHZhciBSZW5kZXJMaXN0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciBub3JtYWxzID0gW107XHJcblx0XHR2YXIgdXZzID0gW107XHJcblxyXG5cdFx0dmFyIG9iamVjdCA9IG51bGw7XHJcblx0XHR2YXIgbWF0ZXJpYWwgPSBudWxsO1xyXG5cclxuXHRcdHZhciBub3JtYWxNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4MygpO1xyXG5cclxuXHRcdGZ1bmN0aW9uIHNldE9iamVjdCggdmFsdWUgKSB7XHJcblxyXG5cdFx0XHRvYmplY3QgPSB2YWx1ZTtcclxuXHRcdFx0bWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XHJcblxyXG5cdFx0XHRub3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KCBvYmplY3QubWF0cml4V29ybGQgKTtcclxuXHJcblx0XHRcdG5vcm1hbHMubGVuZ3RoID0gMDtcclxuXHRcdFx0dXZzLmxlbmd0aCA9IDA7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb2plY3RWZXJ0ZXgoIHZlcnRleCApIHtcclxuXHJcblx0XHRcdHZhciBwb3NpdGlvbiA9IHZlcnRleC5wb3NpdGlvbjtcclxuXHRcdFx0dmFyIHBvc2l0aW9uV29ybGQgPSB2ZXJ0ZXgucG9zaXRpb25Xb3JsZDtcclxuXHRcdFx0dmFyIHBvc2l0aW9uU2NyZWVuID0gdmVydGV4LnBvc2l0aW9uU2NyZWVuO1xyXG5cclxuXHRcdFx0cG9zaXRpb25Xb3JsZC5jb3B5KCBwb3NpdGlvbiApLmFwcGx5TWF0cml4NCggX21vZGVsTWF0cml4ICk7XHJcblx0XHRcdHBvc2l0aW9uU2NyZWVuLmNvcHkoIHBvc2l0aW9uV29ybGQgKS5hcHBseU1hdHJpeDQoIF92aWV3UHJvamVjdGlvbk1hdHJpeCApO1xyXG5cclxuXHRcdFx0dmFyIGludlcgPSAxIC8gcG9zaXRpb25TY3JlZW4udztcclxuXHJcblx0XHRcdHBvc2l0aW9uU2NyZWVuLnggKj0gaW52VztcclxuXHRcdFx0cG9zaXRpb25TY3JlZW4ueSAqPSBpbnZXO1xyXG5cdFx0XHRwb3NpdGlvblNjcmVlbi56ICo9IGludlc7XHJcblxyXG5cdFx0XHR2ZXJ0ZXgudmlzaWJsZSA9IHBvc2l0aW9uU2NyZWVuLnggPj0gLSAxICYmIHBvc2l0aW9uU2NyZWVuLnggPD0gMSAmJlxyXG5cdFx0XHRcdFx0IHBvc2l0aW9uU2NyZWVuLnkgPj0gLSAxICYmIHBvc2l0aW9uU2NyZWVuLnkgPD0gMSAmJlxyXG5cdFx0XHRcdFx0IHBvc2l0aW9uU2NyZWVuLnogPj0gLSAxICYmIHBvc2l0aW9uU2NyZWVuLnogPD0gMTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHVzaFZlcnRleCggeCwgeSwgeiApIHtcclxuXHJcblx0XHRcdF92ZXJ0ZXggPSBnZXROZXh0VmVydGV4SW5Qb29sKCk7XHJcblx0XHRcdF92ZXJ0ZXgucG9zaXRpb24uc2V0KCB4LCB5LCB6ICk7XHJcblxyXG5cdFx0XHRwcm9qZWN0VmVydGV4KCBfdmVydGV4ICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHB1c2hOb3JtYWwoIHgsIHksIHogKSB7XHJcblxyXG5cdFx0XHRub3JtYWxzLnB1c2goIHgsIHksIHogKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHVzaFV2KCB4LCB5ICkge1xyXG5cclxuXHRcdFx0dXZzLnB1c2goIHgsIHkgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gY2hlY2tUcmlhbmdsZVZpc2liaWxpdHkoIHYxLCB2MiwgdjMgKSB7XHJcblxyXG5cdFx0XHRpZiAoIHYxLnZpc2libGUgPT09IHRydWUgfHwgdjIudmlzaWJsZSA9PT0gdHJ1ZSB8fCB2My52aXNpYmxlID09PSB0cnVlICkgcmV0dXJuIHRydWU7XHJcblxyXG5cdFx0XHRfcG9pbnRzM1sgMCBdID0gdjEucG9zaXRpb25TY3JlZW47XHJcblx0XHRcdF9wb2ludHMzWyAxIF0gPSB2Mi5wb3NpdGlvblNjcmVlbjtcclxuXHRcdFx0X3BvaW50czNbIDIgXSA9IHYzLnBvc2l0aW9uU2NyZWVuO1xyXG5cclxuXHRcdFx0cmV0dXJuIF9jbGlwQm94LmludGVyc2VjdHNCb3goIF9ib3VuZGluZ0JveC5zZXRGcm9tUG9pbnRzKCBfcG9pbnRzMyApICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNoZWNrQmFja2ZhY2VDdWxsaW5nKCB2MSwgdjIsIHYzICkge1xyXG5cclxuXHRcdFx0cmV0dXJuICggKCB2My5wb3NpdGlvblNjcmVlbi54IC0gdjEucG9zaXRpb25TY3JlZW4ueCApICpcclxuXHRcdFx0XHQgICAgKCB2Mi5wb3NpdGlvblNjcmVlbi55IC0gdjEucG9zaXRpb25TY3JlZW4ueSApIC1cclxuXHRcdFx0XHQgICAgKCB2My5wb3NpdGlvblNjcmVlbi55IC0gdjEucG9zaXRpb25TY3JlZW4ueSApICpcclxuXHRcdFx0XHQgICAgKCB2Mi5wb3NpdGlvblNjcmVlbi54IC0gdjEucG9zaXRpb25TY3JlZW4ueCApICkgPCAwO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwdXNoTGluZSggYSwgYiApIHtcclxuXHJcblx0XHRcdHZhciB2MSA9IF92ZXJ0ZXhQb29sWyBhIF07XHJcblx0XHRcdHZhciB2MiA9IF92ZXJ0ZXhQb29sWyBiIF07XHJcblxyXG5cdFx0XHRfbGluZSA9IGdldE5leHRMaW5lSW5Qb29sKCk7XHJcblxyXG5cdFx0XHRfbGluZS5pZCA9IG9iamVjdC5pZDtcclxuXHRcdFx0X2xpbmUudjEuY29weSggdjEgKTtcclxuXHRcdFx0X2xpbmUudjIuY29weSggdjIgKTtcclxuXHRcdFx0X2xpbmUueiA9ICggdjEucG9zaXRpb25TY3JlZW4ueiArIHYyLnBvc2l0aW9uU2NyZWVuLnogKSAvIDI7XHJcblx0XHRcdF9saW5lLnJlbmRlck9yZGVyID0gb2JqZWN0LnJlbmRlck9yZGVyO1xyXG5cclxuXHRcdFx0X2xpbmUubWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XHJcblxyXG5cdFx0XHRfcmVuZGVyRGF0YS5lbGVtZW50cy5wdXNoKCBfbGluZSApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwdXNoVHJpYW5nbGUoIGEsIGIsIGMgKSB7XHJcblxyXG5cdFx0XHR2YXIgdjEgPSBfdmVydGV4UG9vbFsgYSBdO1xyXG5cdFx0XHR2YXIgdjIgPSBfdmVydGV4UG9vbFsgYiBdO1xyXG5cdFx0XHR2YXIgdjMgPSBfdmVydGV4UG9vbFsgYyBdO1xyXG5cclxuXHRcdFx0aWYgKCBjaGVja1RyaWFuZ2xlVmlzaWJpbGl0eSggdjEsIHYyLCB2MyApID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcblx0XHRcdGlmICggbWF0ZXJpYWwuc2lkZSA9PT0gVEhSRUUuRG91YmxlU2lkZSB8fCBjaGVja0JhY2tmYWNlQ3VsbGluZyggdjEsIHYyLCB2MyApID09PSB0cnVlICkge1xyXG5cclxuXHRcdFx0XHRfZmFjZSA9IGdldE5leHRGYWNlSW5Qb29sKCk7XHJcblxyXG5cdFx0XHRcdF9mYWNlLmlkID0gb2JqZWN0LmlkO1xyXG5cdFx0XHRcdF9mYWNlLnYxLmNvcHkoIHYxICk7XHJcblx0XHRcdFx0X2ZhY2UudjIuY29weSggdjIgKTtcclxuXHRcdFx0XHRfZmFjZS52My5jb3B5KCB2MyApO1xyXG5cdFx0XHRcdF9mYWNlLnogPSAoIHYxLnBvc2l0aW9uU2NyZWVuLnogKyB2Mi5wb3NpdGlvblNjcmVlbi56ICsgdjMucG9zaXRpb25TY3JlZW4ueiApIC8gMztcclxuXHRcdFx0XHRfZmFjZS5yZW5kZXJPcmRlciA9IG9iamVjdC5yZW5kZXJPcmRlcjtcclxuXHJcblx0XHRcdFx0Ly8gdXNlIGZpcnN0IHZlcnRleCBub3JtYWwgYXMgZmFjZSBub3JtYWxcclxuXHJcblx0XHRcdFx0X2ZhY2Uubm9ybWFsTW9kZWwuZnJvbUFycmF5KCBub3JtYWxzLCBhICogMyApO1xyXG5cdFx0XHRcdF9mYWNlLm5vcm1hbE1vZGVsLmFwcGx5TWF0cml4Myggbm9ybWFsTWF0cml4ICkubm9ybWFsaXplKCk7XHJcblxyXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IDM7IGkgKysgKSB7XHJcblxyXG5cdFx0XHRcdFx0dmFyIG5vcm1hbCA9IF9mYWNlLnZlcnRleE5vcm1hbHNNb2RlbFsgaSBdO1xyXG5cdFx0XHRcdFx0bm9ybWFsLmZyb21BcnJheSggbm9ybWFscywgYXJndW1lbnRzWyBpIF0gKiAzICk7XHJcblx0XHRcdFx0XHRub3JtYWwuYXBwbHlNYXRyaXgzKCBub3JtYWxNYXRyaXggKS5ub3JtYWxpemUoKTtcclxuXHJcblx0XHRcdFx0XHR2YXIgdXYgPSBfZmFjZS51dnNbIGkgXTtcclxuXHRcdFx0XHRcdHV2LmZyb21BcnJheSggdXZzLCBhcmd1bWVudHNbIGkgXSAqIDIgKTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRfZmFjZS52ZXJ0ZXhOb3JtYWxzTGVuZ3RoID0gMztcclxuXHJcblx0XHRcdFx0X2ZhY2UubWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XHJcblxyXG5cdFx0XHRcdF9yZW5kZXJEYXRhLmVsZW1lbnRzLnB1c2goIF9mYWNlICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHNldE9iamVjdDogc2V0T2JqZWN0LFxyXG5cdFx0XHRwcm9qZWN0VmVydGV4OiBwcm9qZWN0VmVydGV4LFxyXG5cdFx0XHRjaGVja1RyaWFuZ2xlVmlzaWJpbGl0eTogY2hlY2tUcmlhbmdsZVZpc2liaWxpdHksXHJcblx0XHRcdGNoZWNrQmFja2ZhY2VDdWxsaW5nOiBjaGVja0JhY2tmYWNlQ3VsbGluZyxcclxuXHRcdFx0cHVzaFZlcnRleDogcHVzaFZlcnRleCxcclxuXHRcdFx0cHVzaE5vcm1hbDogcHVzaE5vcm1hbCxcclxuXHRcdFx0cHVzaFV2OiBwdXNoVXYsXHJcblx0XHRcdHB1c2hMaW5lOiBwdXNoTGluZSxcclxuXHRcdFx0cHVzaFRyaWFuZ2xlOiBwdXNoVHJpYW5nbGVcclxuXHRcdH1cclxuXHJcblx0fTtcclxuXHJcblx0dmFyIHJlbmRlckxpc3QgPSBuZXcgUmVuZGVyTGlzdCgpO1xyXG5cclxuXHR0aGlzLnByb2plY3RTY2VuZSA9IGZ1bmN0aW9uICggc2NlbmUsIGNhbWVyYSwgc29ydE9iamVjdHMsIHNvcnRFbGVtZW50cyApIHtcclxuXHJcblx0XHRfZmFjZUNvdW50ID0gMDtcclxuXHRcdF9saW5lQ291bnQgPSAwO1xyXG5cdFx0X3Nwcml0ZUNvdW50ID0gMDtcclxuXHJcblx0XHRfcmVuZGVyRGF0YS5lbGVtZW50cy5sZW5ndGggPSAwO1xyXG5cclxuXHRcdGlmICggc2NlbmUuYXV0b1VwZGF0ZSA9PT0gdHJ1ZSApIHNjZW5lLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XHJcblx0XHRpZiAoIGNhbWVyYS5wYXJlbnQgPT09IG51bGwgKSBjYW1lcmEudXBkYXRlTWF0cml4V29ybGQoKTtcclxuXHJcblx0XHRfdmlld01hdHJpeC5jb3B5KCBjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UoIGNhbWVyYS5tYXRyaXhXb3JsZCApICk7XHJcblx0XHRfdmlld1Byb2plY3Rpb25NYXRyaXgubXVsdGlwbHlNYXRyaWNlcyggY2FtZXJhLnByb2plY3Rpb25NYXRyaXgsIF92aWV3TWF0cml4ICk7XHJcblxyXG5cdFx0X2ZydXN0dW0uc2V0RnJvbU1hdHJpeCggX3ZpZXdQcm9qZWN0aW9uTWF0cml4ICk7XHJcblxyXG5cdFx0Ly9cclxuXHJcblx0XHRfb2JqZWN0Q291bnQgPSAwO1xyXG5cclxuXHRcdF9yZW5kZXJEYXRhLm9iamVjdHMubGVuZ3RoID0gMDtcclxuXHRcdF9yZW5kZXJEYXRhLmxpZ2h0cy5sZW5ndGggPSAwO1xyXG5cclxuXHRcdHNjZW5lLnRyYXZlcnNlVmlzaWJsZSggZnVuY3Rpb24gKCBvYmplY3QgKSB7XHJcblxyXG5cdFx0XHRpZiAoIG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkxpZ2h0ICkge1xyXG5cclxuXHRcdFx0XHRfcmVuZGVyRGF0YS5saWdodHMucHVzaCggb2JqZWN0ICk7XHJcblxyXG5cdFx0XHR9IGVsc2UgaWYgKCBvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNoIHx8IG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkxpbmUgfHwgb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuU3ByaXRlICkge1xyXG5cclxuXHRcdFx0XHR2YXIgbWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XHJcblxyXG5cdFx0XHRcdGlmICggbWF0ZXJpYWwudmlzaWJsZSA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdGlmICggb2JqZWN0LmZydXN0dW1DdWxsZWQgPT09IGZhbHNlIHx8IF9mcnVzdHVtLmludGVyc2VjdHNPYmplY3QoIG9iamVjdCApID09PSB0cnVlICkge1xyXG5cclxuXHRcdFx0XHRcdF9vYmplY3QgPSBnZXROZXh0T2JqZWN0SW5Qb29sKCk7XHJcblx0XHRcdFx0XHRfb2JqZWN0LmlkID0gb2JqZWN0LmlkO1xyXG5cdFx0XHRcdFx0X29iamVjdC5vYmplY3QgPSBvYmplY3Q7XHJcblxyXG5cdFx0XHRcdFx0X3ZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCBvYmplY3QubWF0cml4V29ybGQgKTtcclxuXHRcdFx0XHRcdF92ZWN0b3IzLmFwcGx5UHJvamVjdGlvbiggX3ZpZXdQcm9qZWN0aW9uTWF0cml4ICk7XHJcblx0XHRcdFx0XHRfb2JqZWN0LnogPSBfdmVjdG9yMy56O1xyXG5cdFx0XHRcdFx0X29iamVjdC5yZW5kZXJPcmRlciA9IG9iamVjdC5yZW5kZXJPcmRlcjtcclxuXHJcblx0XHRcdFx0XHRfcmVuZGVyRGF0YS5vYmplY3RzLnB1c2goIF9vYmplY3QgKTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gKTtcclxuXHJcblx0XHRpZiAoIHNvcnRPYmplY3RzID09PSB0cnVlICkge1xyXG5cclxuXHRcdFx0X3JlbmRlckRhdGEub2JqZWN0cy5zb3J0KCBwYWludGVyU29ydCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHQvL1xyXG5cclxuXHRcdGZvciAoIHZhciBvID0gMCwgb2wgPSBfcmVuZGVyRGF0YS5vYmplY3RzLmxlbmd0aDsgbyA8IG9sOyBvICsrICkge1xyXG5cclxuXHRcdFx0dmFyIG9iamVjdCA9IF9yZW5kZXJEYXRhLm9iamVjdHNbIG8gXS5vYmplY3Q7XHJcblx0XHRcdHZhciBnZW9tZXRyeSA9IG9iamVjdC5nZW9tZXRyeTtcclxuXHJcblx0XHRcdHJlbmRlckxpc3Quc2V0T2JqZWN0KCBvYmplY3QgKTtcclxuXHJcblx0XHRcdF9tb2RlbE1hdHJpeCA9IG9iamVjdC5tYXRyaXhXb3JsZDtcclxuXHJcblx0XHRcdF92ZXJ0ZXhDb3VudCA9IDA7XHJcblxyXG5cdFx0XHRpZiAoIG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLk1lc2ggKSB7XHJcblxyXG5cdFx0XHRcdGlmICggZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSApIHtcclxuXHJcblx0XHRcdFx0XHR2YXIgYXR0cmlidXRlcyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXM7XHJcblx0XHRcdFx0XHR2YXIgZ3JvdXBzID0gZ2VvbWV0cnkuZ3JvdXBzO1xyXG5cclxuXHRcdFx0XHRcdGlmICggYXR0cmlidXRlcy5wb3NpdGlvbiA9PT0gdW5kZWZpbmVkICkgY29udGludWU7XHJcblxyXG5cdFx0XHRcdFx0dmFyIHBvc2l0aW9ucyA9IGF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7XHJcblxyXG5cdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gcG9zaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMyApIHtcclxuXHJcblx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFZlcnRleCggcG9zaXRpb25zWyBpIF0sIHBvc2l0aW9uc1sgaSArIDEgXSwgcG9zaXRpb25zWyBpICsgMiBdICk7XHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggYXR0cmlidXRlcy5ub3JtYWwgIT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdFx0XHRcdHZhciBub3JtYWxzID0gYXR0cmlidXRlcy5ub3JtYWwuYXJyYXk7XHJcblxyXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBub3JtYWxzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMyApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoTm9ybWFsKCBub3JtYWxzWyBpIF0sIG5vcm1hbHNbIGkgKyAxIF0sIG5vcm1hbHNbIGkgKyAyIF0gKTtcclxuXHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBhdHRyaWJ1dGVzLnV2ICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgdXZzID0gYXR0cmlidXRlcy51di5hcnJheTtcclxuXHJcblx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHV2cy5sZW5ndGg7IGkgPCBsOyBpICs9IDIgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFV2KCB1dnNbIGkgXSwgdXZzWyBpICsgMSBdICk7XHJcblxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggZ2VvbWV0cnkuaW5kZXggIT09IG51bGwgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgaW5kaWNlcyA9IGdlb21ldHJ5LmluZGV4LmFycmF5O1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCBncm91cHMubGVuZ3RoID4gMCApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIG8gPSAwOyBvIDwgZ3JvdXBzLmxlbmd0aDsgbyArKyApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgZ3JvdXAgPSBncm91cHNbIG8gXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IGdyb3VwLnN0YXJ0LCBsID0gZ3JvdXAuc3RhcnQgKyBncm91cC5jb3VudDsgaSA8IGw7IGkgKz0gMyApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFRyaWFuZ2xlKCBpbmRpY2VzWyBpIF0sIGluZGljZXNbIGkgKyAxIF0sIGluZGljZXNbIGkgKyAyIF0gKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGluZGljZXMubGVuZ3RoOyBpIDwgbDsgaSArPSAzICkge1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFRyaWFuZ2xlKCBpbmRpY2VzWyBpIF0sIGluZGljZXNbIGkgKyAxIF0sIGluZGljZXNbIGkgKyAyIF0gKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBwb3NpdGlvbnMubGVuZ3RoIC8gMzsgaSA8IGw7IGkgKz0gMyApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoVHJpYW5nbGUoIGksIGkgKyAxLCBpICsgMiApO1xyXG5cclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0fSBlbHNlIGlmICggZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSApIHtcclxuXHJcblx0XHRcdFx0XHR2YXIgdmVydGljZXMgPSBnZW9tZXRyeS52ZXJ0aWNlcztcclxuXHRcdFx0XHRcdHZhciBmYWNlcyA9IGdlb21ldHJ5LmZhY2VzO1xyXG5cdFx0XHRcdFx0dmFyIGZhY2VWZXJ0ZXhVdnMgPSBnZW9tZXRyeS5mYWNlVmVydGV4VXZzWyAwIF07XHJcblxyXG5cdFx0XHRcdFx0X25vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgoIF9tb2RlbE1hdHJpeCApO1xyXG5cclxuXHRcdFx0XHRcdHZhciBtYXRlcmlhbCA9IG9iamVjdC5tYXRlcmlhbDtcclxuXHJcblx0XHRcdFx0XHR2YXIgaXNGYWNlTWF0ZXJpYWwgPSBtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk11bHRpTWF0ZXJpYWw7XHJcblx0XHRcdFx0XHR2YXIgb2JqZWN0TWF0ZXJpYWxzID0gaXNGYWNlTWF0ZXJpYWwgPT09IHRydWUgPyBvYmplY3QubWF0ZXJpYWwgOiBudWxsO1xyXG5cclxuXHRcdFx0XHRcdGZvciAoIHZhciB2ID0gMCwgdmwgPSB2ZXJ0aWNlcy5sZW5ndGg7IHYgPCB2bDsgdiArKyApIHtcclxuXHJcblx0XHRcdFx0XHRcdHZhciB2ZXJ0ZXggPSB2ZXJ0aWNlc1sgdiBdO1xyXG5cclxuXHRcdFx0XHRcdFx0X3ZlY3RvcjMuY29weSggdmVydGV4ICk7XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoIG1hdGVyaWFsLm1vcnBoVGFyZ2V0cyA9PT0gdHJ1ZSApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0dmFyIG1vcnBoVGFyZ2V0cyA9IGdlb21ldHJ5Lm1vcnBoVGFyZ2V0cztcclxuXHRcdFx0XHRcdFx0XHR2YXIgbW9ycGhJbmZsdWVuY2VzID0gb2JqZWN0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlcztcclxuXHJcblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIHQgPSAwLCB0bCA9IG1vcnBoVGFyZ2V0cy5sZW5ndGg7IHQgPCB0bDsgdCArKyApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgaW5mbHVlbmNlID0gbW9ycGhJbmZsdWVuY2VzWyB0IF07XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBpbmZsdWVuY2UgPT09IDAgKSBjb250aW51ZTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgdGFyZ2V0ID0gbW9ycGhUYXJnZXRzWyB0IF07XHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgdGFyZ2V0VmVydGV4ID0gdGFyZ2V0LnZlcnRpY2VzWyB2IF07XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0X3ZlY3RvcjMueCArPSAoIHRhcmdldFZlcnRleC54IC0gdmVydGV4LnggKSAqIGluZmx1ZW5jZTtcclxuXHRcdFx0XHRcdFx0XHRcdF92ZWN0b3IzLnkgKz0gKCB0YXJnZXRWZXJ0ZXgueSAtIHZlcnRleC55ICkgKiBpbmZsdWVuY2U7XHJcblx0XHRcdFx0XHRcdFx0XHRfdmVjdG9yMy56ICs9ICggdGFyZ2V0VmVydGV4LnogLSB2ZXJ0ZXgueiApICogaW5mbHVlbmNlO1xyXG5cclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRyZW5kZXJMaXN0LnB1c2hWZXJ0ZXgoIF92ZWN0b3IzLngsIF92ZWN0b3IzLnksIF92ZWN0b3IzLnogKTtcclxuXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Zm9yICggdmFyIGYgPSAwLCBmbCA9IGZhY2VzLmxlbmd0aDsgZiA8IGZsOyBmICsrICkge1xyXG5cclxuXHRcdFx0XHRcdFx0dmFyIGZhY2UgPSBmYWNlc1sgZiBdO1xyXG5cclxuXHRcdFx0XHRcdFx0bWF0ZXJpYWwgPSBpc0ZhY2VNYXRlcmlhbCA9PT0gdHJ1ZVxyXG5cdFx0XHRcdFx0XHRcdCA/IG9iamVjdE1hdGVyaWFscy5tYXRlcmlhbHNbIGZhY2UubWF0ZXJpYWxJbmRleCBdXHJcblx0XHRcdFx0XHRcdFx0IDogb2JqZWN0Lm1hdGVyaWFsO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCBtYXRlcmlhbCA9PT0gdW5kZWZpbmVkICkgY29udGludWU7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgc2lkZSA9IG1hdGVyaWFsLnNpZGU7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgdjEgPSBfdmVydGV4UG9vbFsgZmFjZS5hIF07XHJcblx0XHRcdFx0XHRcdHZhciB2MiA9IF92ZXJ0ZXhQb29sWyBmYWNlLmIgXTtcclxuXHRcdFx0XHRcdFx0dmFyIHYzID0gX3ZlcnRleFBvb2xbIGZhY2UuYyBdO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCByZW5kZXJMaXN0LmNoZWNrVHJpYW5nbGVWaXNpYmlsaXR5KCB2MSwgdjIsIHYzICkgPT09IGZhbHNlICkgY29udGludWU7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgdmlzaWJsZSA9IHJlbmRlckxpc3QuY2hlY2tCYWNrZmFjZUN1bGxpbmcoIHYxLCB2MiwgdjMgKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmICggc2lkZSAhPT0gVEhSRUUuRG91YmxlU2lkZSApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0aWYgKCBzaWRlID09PSBUSFJFRS5Gcm9udFNpZGUgJiYgdmlzaWJsZSA9PT0gZmFsc2UgKSBjb250aW51ZTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIHNpZGUgPT09IFRIUkVFLkJhY2tTaWRlICYmIHZpc2libGUgPT09IHRydWUgKSBjb250aW51ZTtcclxuXHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdF9mYWNlID0gZ2V0TmV4dEZhY2VJblBvb2woKTtcclxuXHJcblx0XHRcdFx0XHRcdF9mYWNlLmlkID0gb2JqZWN0LmlkO1xyXG5cdFx0XHRcdFx0XHRfZmFjZS52MS5jb3B5KCB2MSApO1xyXG5cdFx0XHRcdFx0XHRfZmFjZS52Mi5jb3B5KCB2MiApO1xyXG5cdFx0XHRcdFx0XHRfZmFjZS52My5jb3B5KCB2MyApO1xyXG5cclxuXHRcdFx0XHRcdFx0X2ZhY2Uubm9ybWFsTW9kZWwuY29weSggZmFjZS5ub3JtYWwgKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmICggdmlzaWJsZSA9PT0gZmFsc2UgJiYgKCBzaWRlID09PSBUSFJFRS5CYWNrU2lkZSB8fCBzaWRlID09PSBUSFJFRS5Eb3VibGVTaWRlICkgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdF9mYWNlLm5vcm1hbE1vZGVsLm5lZ2F0ZSgpO1xyXG5cclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0X2ZhY2Uubm9ybWFsTW9kZWwuYXBwbHlNYXRyaXgzKCBfbm9ybWFsTWF0cml4ICkubm9ybWFsaXplKCk7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgZmFjZVZlcnRleE5vcm1hbHMgPSBmYWNlLnZlcnRleE5vcm1hbHM7XHJcblxyXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgbiA9IDAsIG5sID0gTWF0aC5taW4oIGZhY2VWZXJ0ZXhOb3JtYWxzLmxlbmd0aCwgMyApOyBuIDwgbmw7IG4gKysgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdHZhciBub3JtYWxNb2RlbCA9IF9mYWNlLnZlcnRleE5vcm1hbHNNb2RlbFsgbiBdO1xyXG5cdFx0XHRcdFx0XHRcdG5vcm1hbE1vZGVsLmNvcHkoIGZhY2VWZXJ0ZXhOb3JtYWxzWyBuIF0gKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0aWYgKCB2aXNpYmxlID09PSBmYWxzZSAmJiAoIHNpZGUgPT09IFRIUkVFLkJhY2tTaWRlIHx8IHNpZGUgPT09IFRIUkVFLkRvdWJsZVNpZGUgKSApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRub3JtYWxNb2RlbC5uZWdhdGUoKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRub3JtYWxNb2RlbC5hcHBseU1hdHJpeDMoIF9ub3JtYWxNYXRyaXggKS5ub3JtYWxpemUoKTtcclxuXHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdF9mYWNlLnZlcnRleE5vcm1hbHNMZW5ndGggPSBmYWNlVmVydGV4Tm9ybWFscy5sZW5ndGg7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgdmVydGV4VXZzID0gZmFjZVZlcnRleFV2c1sgZiBdO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCB2ZXJ0ZXhVdnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIHUgPSAwOyB1IDwgMzsgdSArKyApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRfZmFjZS51dnNbIHUgXS5jb3B5KCB2ZXJ0ZXhVdnNbIHUgXSApO1xyXG5cclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRfZmFjZS5jb2xvciA9IGZhY2UuY29sb3I7XHJcblx0XHRcdFx0XHRcdF9mYWNlLm1hdGVyaWFsID0gbWF0ZXJpYWw7XHJcblxyXG5cdFx0XHRcdFx0XHRfZmFjZS56ID0gKCB2MS5wb3NpdGlvblNjcmVlbi56ICsgdjIucG9zaXRpb25TY3JlZW4ueiArIHYzLnBvc2l0aW9uU2NyZWVuLnogKSAvIDM7XHJcblx0XHRcdFx0XHRcdF9mYWNlLnJlbmRlck9yZGVyID0gb2JqZWN0LnJlbmRlck9yZGVyO1xyXG5cclxuXHRcdFx0XHRcdFx0X3JlbmRlckRhdGEuZWxlbWVudHMucHVzaCggX2ZhY2UgKTtcclxuXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0gZWxzZSBpZiAoIG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkxpbmUgKSB7XHJcblxyXG5cdFx0XHRcdGlmICggZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSApIHtcclxuXHJcblx0XHRcdFx0XHR2YXIgYXR0cmlidXRlcyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXM7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBhdHRyaWJ1dGVzLnBvc2l0aW9uICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgcG9zaXRpb25zID0gYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtcclxuXHJcblx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHBvc2l0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDMgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFZlcnRleCggcG9zaXRpb25zWyBpIF0sIHBvc2l0aW9uc1sgaSArIDEgXSwgcG9zaXRpb25zWyBpICsgMiBdICk7XHJcblxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoIGdlb21ldHJ5LmluZGV4ICE9PSBudWxsICkge1xyXG5cclxuXHRcdFx0XHRcdFx0XHR2YXIgaW5kaWNlcyA9IGdlb21ldHJ5LmluZGV4LmFycmF5O1xyXG5cclxuXHRcdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbmRpY2VzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMiApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRyZW5kZXJMaXN0LnB1c2hMaW5lKCBpbmRpY2VzWyBpIF0sIGluZGljZXNbIGkgKyAxIF0gKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0dmFyIHN0ZXAgPSBvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5MaW5lU2VnbWVudHMgPyAyIDogMTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gKCBwb3NpdGlvbnMubGVuZ3RoIC8gMyApIC0gMTsgaSA8IGw7IGkgKz0gc3RlcCApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRyZW5kZXJMaXN0LnB1c2hMaW5lKCBpLCBpICsgMSApO1xyXG5cclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5ICkge1xyXG5cclxuXHRcdFx0XHRcdF9tb2RlbFZpZXdQcm9qZWN0aW9uTWF0cml4Lm11bHRpcGx5TWF0cmljZXMoIF92aWV3UHJvamVjdGlvbk1hdHJpeCwgX21vZGVsTWF0cml4ICk7XHJcblxyXG5cdFx0XHRcdFx0dmFyIHZlcnRpY2VzID0gb2JqZWN0Lmdlb21ldHJ5LnZlcnRpY2VzO1xyXG5cclxuXHRcdFx0XHRcdGlmICggdmVydGljZXMubGVuZ3RoID09PSAwICkgY29udGludWU7XHJcblxyXG5cdFx0XHRcdFx0djEgPSBnZXROZXh0VmVydGV4SW5Qb29sKCk7XHJcblx0XHRcdFx0XHR2MS5wb3NpdGlvblNjcmVlbi5jb3B5KCB2ZXJ0aWNlc1sgMCBdICkuYXBwbHlNYXRyaXg0KCBfbW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCApO1xyXG5cclxuXHRcdFx0XHRcdHZhciBzdGVwID0gb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTGluZVNlZ21lbnRzID8gMiA6IDE7XHJcblxyXG5cdFx0XHRcdFx0Zm9yICggdmFyIHYgPSAxLCB2bCA9IHZlcnRpY2VzLmxlbmd0aDsgdiA8IHZsOyB2ICsrICkge1xyXG5cclxuXHRcdFx0XHRcdFx0djEgPSBnZXROZXh0VmVydGV4SW5Qb29sKCk7XHJcblx0XHRcdFx0XHRcdHYxLnBvc2l0aW9uU2NyZWVuLmNvcHkoIHZlcnRpY2VzWyB2IF0gKS5hcHBseU1hdHJpeDQoIF9tb2RlbFZpZXdQcm9qZWN0aW9uTWF0cml4ICk7XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoICggdiArIDEgKSAlIHN0ZXAgPiAwICkgY29udGludWU7XHJcblxyXG5cdFx0XHRcdFx0XHR2MiA9IF92ZXJ0ZXhQb29sWyBfdmVydGV4Q291bnQgLSAyIF07XHJcblxyXG5cdFx0XHRcdFx0XHRfY2xpcHBlZFZlcnRleDFQb3NpdGlvblNjcmVlbi5jb3B5KCB2MS5wb3NpdGlvblNjcmVlbiApO1xyXG5cdFx0XHRcdFx0XHRfY2xpcHBlZFZlcnRleDJQb3NpdGlvblNjcmVlbi5jb3B5KCB2Mi5wb3NpdGlvblNjcmVlbiApO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCBjbGlwTGluZSggX2NsaXBwZWRWZXJ0ZXgxUG9zaXRpb25TY3JlZW4sIF9jbGlwcGVkVmVydGV4MlBvc2l0aW9uU2NyZWVuICkgPT09IHRydWUgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIFBlcmZvcm0gdGhlIHBlcnNwZWN0aXZlIGRpdmlkZVxyXG5cdFx0XHRcdFx0XHRcdF9jbGlwcGVkVmVydGV4MVBvc2l0aW9uU2NyZWVuLm11bHRpcGx5U2NhbGFyKCAxIC8gX2NsaXBwZWRWZXJ0ZXgxUG9zaXRpb25TY3JlZW4udyApO1xyXG5cdFx0XHRcdFx0XHRcdF9jbGlwcGVkVmVydGV4MlBvc2l0aW9uU2NyZWVuLm11bHRpcGx5U2NhbGFyKCAxIC8gX2NsaXBwZWRWZXJ0ZXgyUG9zaXRpb25TY3JlZW4udyApO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRfbGluZSA9IGdldE5leHRMaW5lSW5Qb29sKCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdF9saW5lLmlkID0gb2JqZWN0LmlkO1xyXG5cdFx0XHRcdFx0XHRcdF9saW5lLnYxLnBvc2l0aW9uU2NyZWVuLmNvcHkoIF9jbGlwcGVkVmVydGV4MVBvc2l0aW9uU2NyZWVuICk7XHJcblx0XHRcdFx0XHRcdFx0X2xpbmUudjIucG9zaXRpb25TY3JlZW4uY29weSggX2NsaXBwZWRWZXJ0ZXgyUG9zaXRpb25TY3JlZW4gKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0X2xpbmUueiA9IE1hdGgubWF4KCBfY2xpcHBlZFZlcnRleDFQb3NpdGlvblNjcmVlbi56LCBfY2xpcHBlZFZlcnRleDJQb3NpdGlvblNjcmVlbi56ICk7XHJcblx0XHRcdFx0XHRcdFx0X2xpbmUucmVuZGVyT3JkZXIgPSBvYmplY3QucmVuZGVyT3JkZXI7XHJcblxyXG5cdFx0XHRcdFx0XHRcdF9saW5lLm1hdGVyaWFsID0gb2JqZWN0Lm1hdGVyaWFsO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoIG9iamVjdC5tYXRlcmlhbC52ZXJ0ZXhDb2xvcnMgPT09IFRIUkVFLlZlcnRleENvbG9ycyApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRfbGluZS52ZXJ0ZXhDb2xvcnNbIDAgXS5jb3B5KCBvYmplY3QuZ2VvbWV0cnkuY29sb3JzWyB2IF0gKTtcclxuXHRcdFx0XHRcdFx0XHRcdF9saW5lLnZlcnRleENvbG9yc1sgMSBdLmNvcHkoIG9iamVjdC5nZW9tZXRyeS5jb2xvcnNbIHYgLSAxIF0gKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRfcmVuZGVyRGF0YS5lbGVtZW50cy5wdXNoKCBfbGluZSApO1xyXG5cclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fSBlbHNlIGlmICggb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuU3ByaXRlICkge1xyXG5cclxuXHRcdFx0XHRfdmVjdG9yNC5zZXQoIF9tb2RlbE1hdHJpeC5lbGVtZW50c1sgMTIgXSwgX21vZGVsTWF0cml4LmVsZW1lbnRzWyAxMyBdLCBfbW9kZWxNYXRyaXguZWxlbWVudHNbIDE0IF0sIDEgKTtcclxuXHRcdFx0XHRfdmVjdG9yNC5hcHBseU1hdHJpeDQoIF92aWV3UHJvamVjdGlvbk1hdHJpeCApO1xyXG5cclxuXHRcdFx0XHR2YXIgaW52VyA9IDEgLyBfdmVjdG9yNC53O1xyXG5cclxuXHRcdFx0XHRfdmVjdG9yNC56ICo9IGludlc7XHJcblxyXG5cdFx0XHRcdGlmICggX3ZlY3RvcjQueiA+PSAtIDEgJiYgX3ZlY3RvcjQueiA8PSAxICkge1xyXG5cclxuXHRcdFx0XHRcdF9zcHJpdGUgPSBnZXROZXh0U3ByaXRlSW5Qb29sKCk7XHJcblx0XHRcdFx0XHRfc3ByaXRlLmlkID0gb2JqZWN0LmlkO1xyXG5cdFx0XHRcdFx0X3Nwcml0ZS54ID0gX3ZlY3RvcjQueCAqIGludlc7XHJcblx0XHRcdFx0XHRfc3ByaXRlLnkgPSBfdmVjdG9yNC55ICogaW52VztcclxuXHRcdFx0XHRcdF9zcHJpdGUueiA9IF92ZWN0b3I0Lno7XHJcblx0XHRcdFx0XHRfc3ByaXRlLnJlbmRlck9yZGVyID0gb2JqZWN0LnJlbmRlck9yZGVyO1xyXG5cdFx0XHRcdFx0X3Nwcml0ZS5vYmplY3QgPSBvYmplY3Q7XHJcblxyXG5cdFx0XHRcdFx0X3Nwcml0ZS5yb3RhdGlvbiA9IG9iamVjdC5yb3RhdGlvbjtcclxuXHJcblx0XHRcdFx0XHRfc3ByaXRlLnNjYWxlLnggPSBvYmplY3Quc2NhbGUueCAqIE1hdGguYWJzKCBfc3ByaXRlLnggLSAoIF92ZWN0b3I0LnggKyBjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgMCBdICkgLyAoIF92ZWN0b3I0LncgKyBjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgMTIgXSApICk7XHJcblx0XHRcdFx0XHRfc3ByaXRlLnNjYWxlLnkgPSBvYmplY3Quc2NhbGUueSAqIE1hdGguYWJzKCBfc3ByaXRlLnkgLSAoIF92ZWN0b3I0LnkgKyBjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgNSBdICkgLyAoIF92ZWN0b3I0LncgKyBjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgMTMgXSApICk7XHJcblxyXG5cdFx0XHRcdFx0X3Nwcml0ZS5tYXRlcmlhbCA9IG9iamVjdC5tYXRlcmlhbDtcclxuXHJcblx0XHRcdFx0XHRfcmVuZGVyRGF0YS5lbGVtZW50cy5wdXNoKCBfc3ByaXRlICk7XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBzb3J0RWxlbWVudHMgPT09IHRydWUgKSB7XHJcblxyXG5cdFx0XHRfcmVuZGVyRGF0YS5lbGVtZW50cy5zb3J0KCBwYWludGVyU29ydCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gX3JlbmRlckRhdGE7XHJcblxyXG5cdH07XHJcblxyXG5cdC8vIFBvb2xzXHJcblxyXG5cdGZ1bmN0aW9uIGdldE5leHRPYmplY3RJblBvb2woKSB7XHJcblxyXG5cdFx0aWYgKCBfb2JqZWN0Q291bnQgPT09IF9vYmplY3RQb29sTGVuZ3RoICkge1xyXG5cclxuXHRcdFx0dmFyIG9iamVjdCA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlT2JqZWN0KCk7XHJcblx0XHRcdF9vYmplY3RQb29sLnB1c2goIG9iamVjdCApO1xyXG5cdFx0XHRfb2JqZWN0UG9vbExlbmd0aCArKztcclxuXHRcdFx0X29iamVjdENvdW50ICsrO1xyXG5cdFx0XHRyZXR1cm4gb2JqZWN0O1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gX29iamVjdFBvb2xbIF9vYmplY3RDb3VudCArKyBdO1xyXG5cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGdldE5leHRWZXJ0ZXhJblBvb2woKSB7XHJcblxyXG5cdFx0aWYgKCBfdmVydGV4Q291bnQgPT09IF92ZXJ0ZXhQb29sTGVuZ3RoICkge1xyXG5cclxuXHRcdFx0dmFyIHZlcnRleCA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4KCk7XHJcblx0XHRcdF92ZXJ0ZXhQb29sLnB1c2goIHZlcnRleCApO1xyXG5cdFx0XHRfdmVydGV4UG9vbExlbmd0aCArKztcclxuXHRcdFx0X3ZlcnRleENvdW50ICsrO1xyXG5cdFx0XHRyZXR1cm4gdmVydGV4O1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gX3ZlcnRleFBvb2xbIF92ZXJ0ZXhDb3VudCArKyBdO1xyXG5cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGdldE5leHRGYWNlSW5Qb29sKCkge1xyXG5cclxuXHRcdGlmICggX2ZhY2VDb3VudCA9PT0gX2ZhY2VQb29sTGVuZ3RoICkge1xyXG5cclxuXHRcdFx0dmFyIGZhY2UgPSBuZXcgVEhSRUUuUmVuZGVyYWJsZUZhY2UoKTtcclxuXHRcdFx0X2ZhY2VQb29sLnB1c2goIGZhY2UgKTtcclxuXHRcdFx0X2ZhY2VQb29sTGVuZ3RoICsrO1xyXG5cdFx0XHRfZmFjZUNvdW50ICsrO1xyXG5cdFx0XHRyZXR1cm4gZmFjZTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIF9mYWNlUG9vbFsgX2ZhY2VDb3VudCArKyBdO1xyXG5cclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBnZXROZXh0TGluZUluUG9vbCgpIHtcclxuXHJcblx0XHRpZiAoIF9saW5lQ291bnQgPT09IF9saW5lUG9vbExlbmd0aCApIHtcclxuXHJcblx0XHRcdHZhciBsaW5lID0gbmV3IFRIUkVFLlJlbmRlcmFibGVMaW5lKCk7XHJcblx0XHRcdF9saW5lUG9vbC5wdXNoKCBsaW5lICk7XHJcblx0XHRcdF9saW5lUG9vbExlbmd0aCArKztcclxuXHRcdFx0X2xpbmVDb3VudCArKztcclxuXHRcdFx0cmV0dXJuIGxpbmU7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBfbGluZVBvb2xbIF9saW5lQ291bnQgKysgXTtcclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBnZXROZXh0U3ByaXRlSW5Qb29sKCkge1xyXG5cclxuXHRcdGlmICggX3Nwcml0ZUNvdW50ID09PSBfc3ByaXRlUG9vbExlbmd0aCApIHtcclxuXHJcblx0XHRcdHZhciBzcHJpdGUgPSBuZXcgVEhSRUUuUmVuZGVyYWJsZVNwcml0ZSgpO1xyXG5cdFx0XHRfc3ByaXRlUG9vbC5wdXNoKCBzcHJpdGUgKTtcclxuXHRcdFx0X3Nwcml0ZVBvb2xMZW5ndGggKys7XHJcblx0XHRcdF9zcHJpdGVDb3VudCArKztcclxuXHRcdFx0cmV0dXJuIHNwcml0ZTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIF9zcHJpdGVQb29sWyBfc3ByaXRlQ291bnQgKysgXTtcclxuXHJcblx0fVxyXG5cclxuXHQvL1xyXG5cclxuXHRmdW5jdGlvbiBwYWludGVyU29ydCggYSwgYiApIHtcclxuXHJcblx0XHRpZiAoIGEucmVuZGVyT3JkZXIgIT09IGIucmVuZGVyT3JkZXIgKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gYS5yZW5kZXJPcmRlciAtIGIucmVuZGVyT3JkZXI7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggYS56ICE9PSBiLnogKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gYi56IC0gYS56O1xyXG5cclxuXHRcdH0gZWxzZSBpZiAoIGEuaWQgIT09IGIuaWQgKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gYS5pZCAtIGIuaWQ7XHJcblxyXG5cdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdHJldHVybiAwO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBjbGlwTGluZSggczEsIHMyICkge1xyXG5cclxuXHRcdHZhciBhbHBoYTEgPSAwLCBhbHBoYTIgPSAxLFxyXG5cclxuXHRcdC8vIENhbGN1bGF0ZSB0aGUgYm91bmRhcnkgY29vcmRpbmF0ZSBvZiBlYWNoIHZlcnRleCBmb3IgdGhlIG5lYXIgYW5kIGZhciBjbGlwIHBsYW5lcyxcclxuXHRcdC8vIFogPSAtMSBhbmQgWiA9ICsxLCByZXNwZWN0aXZlbHkuXHJcblx0XHRiYzFuZWFyID0gIHMxLnogKyBzMS53LFxyXG5cdFx0YmMybmVhciA9ICBzMi56ICsgczIudyxcclxuXHRcdGJjMWZhciA9ICAtIHMxLnogKyBzMS53LFxyXG5cdFx0YmMyZmFyID0gIC0gczIueiArIHMyLnc7XHJcblxyXG5cdFx0aWYgKCBiYzFuZWFyID49IDAgJiYgYmMybmVhciA+PSAwICYmIGJjMWZhciA+PSAwICYmIGJjMmZhciA+PSAwICkge1xyXG5cclxuXHRcdFx0Ly8gQm90aCB2ZXJ0aWNlcyBsaWUgZW50aXJlbHkgd2l0aGluIGFsbCBjbGlwIHBsYW5lcy5cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggKCBiYzFuZWFyIDwgMCAmJiBiYzJuZWFyIDwgMCApIHx8ICggYmMxZmFyIDwgMCAmJiBiYzJmYXIgPCAwICkgKSB7XHJcblxyXG5cdFx0XHQvLyBCb3RoIHZlcnRpY2VzIGxpZSBlbnRpcmVseSBvdXRzaWRlIG9uZSBvZiB0aGUgY2xpcCBwbGFuZXMuXHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHJcblx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0Ly8gVGhlIGxpbmUgc2VnbWVudCBzcGFucyBhdCBsZWFzdCBvbmUgY2xpcCBwbGFuZS5cclxuXHJcblx0XHRcdGlmICggYmMxbmVhciA8IDAgKSB7XHJcblxyXG5cdFx0XHRcdC8vIHYxIGxpZXMgb3V0c2lkZSB0aGUgbmVhciBwbGFuZSwgdjIgaW5zaWRlXHJcblx0XHRcdFx0YWxwaGExID0gTWF0aC5tYXgoIGFscGhhMSwgYmMxbmVhciAvICggYmMxbmVhciAtIGJjMm5lYXIgKSApO1xyXG5cclxuXHRcdFx0fSBlbHNlIGlmICggYmMybmVhciA8IDAgKSB7XHJcblxyXG5cdFx0XHRcdC8vIHYyIGxpZXMgb3V0c2lkZSB0aGUgbmVhciBwbGFuZSwgdjEgaW5zaWRlXHJcblx0XHRcdFx0YWxwaGEyID0gTWF0aC5taW4oIGFscGhhMiwgYmMxbmVhciAvICggYmMxbmVhciAtIGJjMm5lYXIgKSApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBiYzFmYXIgPCAwICkge1xyXG5cclxuXHRcdFx0XHQvLyB2MSBsaWVzIG91dHNpZGUgdGhlIGZhciBwbGFuZSwgdjIgaW5zaWRlXHJcblx0XHRcdFx0YWxwaGExID0gTWF0aC5tYXgoIGFscGhhMSwgYmMxZmFyIC8gKCBiYzFmYXIgLSBiYzJmYXIgKSApO1xyXG5cclxuXHRcdFx0fSBlbHNlIGlmICggYmMyZmFyIDwgMCApIHtcclxuXHJcblx0XHRcdFx0Ly8gdjIgbGllcyBvdXRzaWRlIHRoZSBmYXIgcGxhbmUsIHYyIGluc2lkZVxyXG5cdFx0XHRcdGFscGhhMiA9IE1hdGgubWluKCBhbHBoYTIsIGJjMWZhciAvICggYmMxZmFyIC0gYmMyZmFyICkgKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggYWxwaGEyIDwgYWxwaGExICkge1xyXG5cclxuXHRcdFx0XHQvLyBUaGUgbGluZSBzZWdtZW50IHNwYW5zIHR3byBib3VuZGFyaWVzLCBidXQgaXMgb3V0c2lkZSBib3RoIG9mIHRoZW0uXHJcblx0XHRcdFx0Ly8gKFRoaXMgY2FuJ3QgaGFwcGVuIHdoZW4gd2UncmUgb25seSBjbGlwcGluZyBhZ2FpbnN0IGp1c3QgbmVhci9mYXIgYnV0IGdvb2RcclxuXHRcdFx0XHQvLyAgdG8gbGVhdmUgdGhlIGNoZWNrIGhlcmUgZm9yIGZ1dHVyZSB1c2FnZSBpZiBvdGhlciBjbGlwIHBsYW5lcyBhcmUgYWRkZWQuKVxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdC8vIFVwZGF0ZSB0aGUgczEgYW5kIHMyIHZlcnRpY2VzIHRvIG1hdGNoIHRoZSBjbGlwcGVkIGxpbmUgc2VnbWVudC5cclxuXHRcdFx0XHRzMS5sZXJwKCBzMiwgYWxwaGExICk7XHJcblx0XHRcdFx0czIubGVycCggczEsIDEgLSBhbHBoYTIgKTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG59O1xyXG4iXX0=